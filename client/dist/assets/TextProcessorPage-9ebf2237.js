import{j as e,e as S,a as U,r as c,R as D}from"./index-311eb106.js";import{u as G}from"./index.esm-301e9dda.js";import{t as H,z as p}from"./index-8b2133c0.js";import{B as m,C as F,a as I}from"./Card-05bb7dd2.js";import{f as V}from"./flashcard.service-000b262e.js";import{p as _}from"./processor.service-8cf8a9dd.js";const Q=({message:d,type:s="info",id:n,className:l,icon:i=!0})=>{const u={error:"text-red-600",success:"text-green-600",info:"text-blue-600",warning:"text-amber-600"},o={error:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"mr-1.5 h-4 w-4 flex-shrink-0","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})}),success:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"mr-1.5 h-4 w-4 flex-shrink-0","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),info:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"mr-1.5 h-4 w-4 flex-shrink-0","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})}),warning:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"mr-1.5 h-4 w-4 flex-shrink-0","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})};return e.jsxs("p",{id:n,className:S("mt-1.5 text-xs flex items-center",u[s],l),role:s==="error"?"alert":"status",children:[i&&o[s],d]})},y=Q,g=({className:d,width:s="100%",height:n="1rem",animate:l=!0,radius:i="0.25rem",circle:u=!1,...o})=>{const x=h=>typeof h=="number"?`${h}px`:h;return e.jsx("div",{className:S("bg-neutral-200",l&&"animate-pulse",d),style:{width:x(s),height:x(n),borderRadius:u?"50%":x(i)},"aria-hidden":"true",...o})},W=p.object({title:p.string().min(1,"Title is required"),content:p.string().min(10,"Text must be at least 10 characters long"),maxCards:p.number().int().min(5,"Minimum 5 cards required").max(100,"Maximum 100 cards allowed"),includeImages:p.boolean().default(!1),includeExamples:p.boolean().default(!0)}),R=D.memo(({card:d,index:s,onEdit:n,onRemove:l})=>e.jsx(F,{className:"mb-4",children:e.jsxs(I,{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:`question-${s}`,className:"mb-1 block text-sm font-medium text-neutral-700",children:"Question"}),e.jsx("textarea",{id:`question-${s}`,rows:2,className:"block w-full rounded-md border border-neutral-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm",value:d.question,onChange:i=>n(s,"question",i.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:`answer-${s}`,className:"mb-1 block text-sm font-medium text-neutral-700",children:"Answer"}),e.jsx("textarea",{id:`answer-${s}`,rows:3,className:"block w-full rounded-md border border-neutral-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm",value:d.answer,onChange:i=>n(s,"answer",i.target.value)})]}),d.imageUrl&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"mb-1 block text-sm font-medium text-neutral-700",children:"Image"}),e.jsx("img",{src:d.imageUrl,alt:"Flashcard visual aid",className:"max-h-40 rounded-md border border-neutral-300",loading:"lazy"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(m,{variant:"danger",size:"sm",onClick:()=>l(s),children:"Remove Card"})})]})},s));R.displayName="FlashcardItem";function ee(){const d=U(),[s,n]=c.useState(!1),[l,i]=c.useState([]),[u,o]=c.useState(null),[x,h]=c.useState("input"),[T,z]=c.useState(!1),{register:b,handleSubmit:E,watch:C,formState:{errors:t,isValid:M,isDirty:B}}=G({resolver:H(W),defaultValues:{title:"",content:"",maxCards:20,includeImages:!1,includeExamples:!0},mode:"onChange"}),j=C("content"),$=C("title"),P=c.useMemo(()=>j?j.trim().split(/\s+/).filter(Boolean).length:0,[j]),q=async r=>{n(!0),o(null);try{const a=await _.processText({title:r.title,content:r.content,maxCards:r.maxCards,includeImages:r.includeImages,includeExamples:r.includeExamples});i(a.cards),h("review")}catch(a){o("Failed to process text. Please try again."),console.error(a)}finally{n(!1)}},k=async()=>{if(l.length===0){o("No flashcards to save.");return}n(!0),o(null);try{const r=$,a=await V.createSet({title:r,description:`Generated from text processing on ${new Date().toLocaleDateString()}`,cards:l.map(f=>({front:f.question,back:f.answer,imageUrl:f.imageUrl||null}))});z(!0),setTimeout(()=>{d(`/flashcards/${a}`)},1500)}catch(r){o("Failed to save flashcards. Please try again."),console.error(r)}finally{n(!1)}},L=c.useCallback((r,a,f)=>{i(w=>{const N=[...w];return N[r]={...N[r],[a]:f},N})},[]),A=c.useCallback(r=>{i(a=>a.filter((f,w)=>w!==r))},[]),v=()=>{h("input")};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Text Processor"}),e.jsx("p",{className:"mt-2 text-neutral-600",children:"Transform your text content into flashcards for more effective learning."})]}),x==="review"&&e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(m,{variant:"outline",onClick:v,className:"mr-2",children:"Back to Input"})})]}),u&&e.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4 text-red-700",role:"alert",children:u}),T&&e.jsx("div",{className:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 text-green-700",role:"status",children:"Flashcards saved successfully! Redirecting..."}),x==="input"?e.jsx(F,{children:e.jsx(I,{className:"p-6",children:e.jsxs("form",{onSubmit:E(q),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-neutral-700",children:"Set Title"}),e.jsx("input",{id:"title",type:"text",className:`mt-1 block w-full rounded-md border ${t.title?"border-red-300":"border-neutral-300"} px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm`,placeholder:"Enter a title for your flashcard set","aria-invalid":t.title?"true":"false","aria-describedby":t.title?"title-error":void 0,...b("title")}),t.title&&e.jsx(y,{id:"title-error",message:t.title.message||"Title is required",type:"error"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-neutral-700",children:"Text Content"}),e.jsx("div",{className:"mt-1 flex rounded-md shadow-sm",children:e.jsx("textarea",{id:"content",rows:12,className:`block w-full rounded-md border ${t.content?"border-red-300":"border-neutral-300"} px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm`,placeholder:"Paste or type your text content here","aria-invalid":t.content?"true":"false","aria-describedby":t.content?"content-error":"content-help",...b("content")})}),e.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:justify-between",children:[e.jsxs("p",{id:"content-help",className:"text-xs text-neutral-500",children:["Word count: ",P]}),t.content&&e.jsx(y,{id:"content-error",message:t.content.message||"Content is required",type:"error"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxCards",className:"block text-sm font-medium text-neutral-700",children:"Maximum Cards"}),e.jsx("input",{id:"maxCards",type:"number",min:"5",max:"100",className:`mt-1 block w-full rounded-md border ${t.maxCards?"border-red-300":"border-neutral-300"} px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm`,"aria-invalid":t.maxCards?"true":"false","aria-describedby":t.maxCards?"maxCards-error":void 0,...b("maxCards",{valueAsNumber:!0})}),t.maxCards&&e.jsx(y,{id:"maxCards-error",message:t.maxCards.message||"Invalid value",type:"error"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"includeImages",type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500",...b("includeImages")}),e.jsx("label",{htmlFor:"includeImages",className:"ml-2 block text-sm text-neutral-700",children:"Include relevant images (when available)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"includeExamples",type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500",...b("includeExamples")}),e.jsx("label",{htmlFor:"includeExamples",className:"ml-2 block text-sm text-neutral-700",children:"Include examples in answers"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(m,{type:"submit",isLoading:s,disabled:s||!B||!M,children:"Generate Flashcards"})})]})})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Review Generated Flashcards"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",onClick:v,children:"Back to Input"}),e.jsx(m,{onClick:k,isLoading:s,disabled:s||l.length===0,children:"Save Flashcards"})]})]}),s?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((r,a)=>e.jsxs("div",{className:"rounded-lg border border-neutral-200 bg-white p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(g,{height:16,width:100,className:"mb-2"}),e.jsx(g,{height:48})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(g,{height:16,width:80,className:"mb-2"}),e.jsx(g,{height:72})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{height:32,width:120})})]},a))}):l.length>0?e.jsxs("div",{children:[e.jsxs("p",{className:"mb-4 text-neutral-600",children:[l.length," flashcards were generated. You can edit them before saving."]}),l.map((r,a)=>e.jsx(R,{card:r,index:a,onEdit:L,onRemove:A},a)),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(m,{onClick:k,isLoading:s,disabled:s||l.length===0,children:"Save Flashcards"})})]}):e.jsxs("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 p-8 text-center",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium text-neutral-900",children:"No flashcards generated"}),e.jsx("p",{className:"mb-6 text-neutral-600",children:"Try adjusting your text content and settings to generate flashcards."}),e.jsx(m,{onClick:v,children:"Back to Input"})]})]})]})}export{ee as default};
