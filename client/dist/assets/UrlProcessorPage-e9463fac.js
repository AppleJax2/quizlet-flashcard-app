import{j as e,C as b,a as j,B as p}from"./index-f8d0b61e.js";import{b as L,r as u,L as M}from"./vendor-5b64d0ef.js";import{u as O}from"./index.esm-d2ec7ada.js";import{t as B,z as n}from"./index-033ed600.js";import{f as V}from"./flashcard.service-8555d080.js";import{p as C}from"./processor.service-0d023b0f.js";const $=n.object({title:n.string().min(1,"Title is required"),url:n.string().url("Please enter a valid URL"),maxCards:n.number().int().min(5).max(100),includeImages:n.boolean().default(!1),includeExamples:n.boolean().default(!0),focusOnMainContent:n.boolean().default(!0)});function _(){const k=L(),[g,i]=u.useState(!1),[o,f]=u.useState([]),[c,S]=u.useState(null),[v,x]=u.useState(null),[U,N]=u.useState("input"),{register:d,handleSubmit:P,watch:h,formState:{errors:t},setValue:F}=O({resolver:B($),defaultValues:{title:"",url:"",maxCards:20,includeImages:!0,includeExamples:!0,focusOnMainContent:!0}}),m=h("url"),y=async()=>{if(!(!m||!m.startsWith("http")))try{i(!0);const s=await C.getUrlPreview(m);S(s),s.title&&!h("title")&&F("title",s.title)}catch(s){console.error("Failed to fetch URL preview:",s)}finally{i(!1)}},R=async s=>{i(!0),x(null);try{const r=await C.processUrl({title:s.title,url:s.url,maxCards:s.maxCards,includeImages:s.includeImages,includeExamples:s.includeExamples,focusOnMainContent:s.focusOnMainContent});f(r.cards),N("review")}catch(r){x("Failed to process URL content. Please try again."),console.error(r)}finally{i(!1)}},E=async()=>{i(!0),x(null);try{const s=h("title"),r=h("url"),a=await V.createSet({title:s,description:`Generated from URL: ${r}`,cards:o.map(l=>({front:l.question,back:l.answer,imageUrl:l.imageUrl||null}))});k(`/flashcards/${a}`)}catch(s){x("Failed to save flashcards. Please try again."),console.error(s)}finally{i(!1)}},w=(s,r,a)=>{const l=[...o];l[s]={...l[s],[r]:a},f(l)},I=s=>{f(o.filter((r,a)=>a!==s))};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"URL Content Processor"}),e.jsx("p",{className:"mt-2 text-neutral-600",children:"Create flashcards from online articles, blog posts, and other web content."})]}),v&&e.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4 text-red-700",children:v}),U==="input"?e.jsx(b,{children:e.jsx(j,{className:"p-6",children:e.jsxs("form",{onSubmit:P(R),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-neutral-700",children:"URL"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("input",{id:"url",type:"url",className:`block w-full rounded-md border ${t.url?"border-red-300":"border-neutral-300"} px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm`,placeholder:"https://example.com/article",...d("url"),onBlur:y}),e.jsx("button",{type:"button",onClick:y,className:"ml-3 inline-flex items-center rounded-md border border-neutral-300 bg-neutral-50 px-4 py-2 text-sm font-medium text-neutral-700 shadow-sm hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Preview"})]}),t.url&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.url.message})]}),c&&e.jsx("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 p-4",children:e.jsxs("div",{className:"flex",children:[c.image&&e.jsx("div",{className:"mr-4 flex-shrink-0",children:e.jsx("img",{src:c.image,alt:"URL Preview",className:"h-20 w-20 rounded-md object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-900",children:c.title}),c.description&&e.jsx("p",{className:"mt-1 text-sm text-neutral-500 line-clamp-2",children:c.description}),e.jsx("p",{className:"mt-2 text-xs text-neutral-400",children:m})]})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-neutral-700",children:"Set Title"}),e.jsx("input",{id:"title",type:"text",className:`mt-1 block w-full rounded-md border ${t.title?"border-red-300":"border-neutral-300"} px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm`,placeholder:"Enter a title for your flashcard set",...d("title")}),t.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.title.message})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxCards",className:"block text-sm font-medium text-neutral-700",children:"Maximum Cards"}),e.jsx("input",{id:"maxCards",type:"number",min:"5",max:"100",className:`mt-1 block w-full rounded-md border ${t.maxCards?"border-red-300":"border-neutral-300"} px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm`,...d("maxCards",{valueAsNumber:!0})}),t.maxCards&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.maxCards.message})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"includeImages",type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500",...d("includeImages")}),e.jsx("label",{htmlFor:"includeImages",className:"ml-2 block text-sm text-neutral-700",children:"Include relevant images (when available)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"includeExamples",type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500",...d("includeExamples")}),e.jsx("label",{htmlFor:"includeExamples",className:"ml-2 block text-sm text-neutral-700",children:"Include examples in answers"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"focusOnMainContent",type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500",...d("focusOnMainContent")}),e.jsx("label",{htmlFor:"focusOnMainContent",className:"ml-2 block text-sm text-neutral-700",children:"Focus on main content (ignore menus, footers, etc.)"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(M,{to:"/dashboard",children:e.jsx(p,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(p,{type:"submit",isLoading:g,children:"Generate Flashcards"})]})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{children:e.jsxs(j,{className:"p-6",children:[e.jsxs("div",{className:"mb-4 flex justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Review Generated Cards"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[o.length," cards generated"]})]}),e.jsx("p",{className:"text-neutral-600",children:"Review and edit your cards before saving them to your flashcard set."}),e.jsxs("p",{className:"mt-2 text-xs text-neutral-500",children:["Source: ",e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:m})]})]})}),o.map((s,r)=>e.jsx(b,{children:e.jsxs(j,{className:"p-6",children:[e.jsxs("div",{className:"mb-4 grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:"Question"}),e.jsx("textarea",{rows:3,value:s.question,onChange:a=>w(r,"question",a.target.value),className:"mt-1 block w-full rounded-md border border-neutral-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm"})]}),e.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:"Answer"}),e.jsx("textarea",{rows:3,value:s.answer,onChange:a=>w(r,"answer",a.target.value),className:"mt-1 block w-full rounded-md border border-neutral-300 px-3 py-2 shadow-sm focus:border-primary-500 focus:outline-none focus:ring-primary-500 sm:text-sm"})]})]}),s.imageUrl&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-neutral-700",children:"Image"}),e.jsx("img",{src:s.imageUrl,alt:"Card illustration",className:"h-32 w-auto rounded-md border border-neutral-200 object-cover"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>I(r),className:"inline-flex items-center rounded-md border border-transparent px-3 py-2 text-sm font-medium leading-4 text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Remove Card"]})})]})},r)),e.jsxs("div",{className:"flex justify-between space-x-3",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>N("input"),children:"Back to Editor"}),e.jsx(p,{type:"button",isLoading:g,onClick:E,disabled:o.length===0,children:"Save Flashcard Set"})]})]})]})}export{_ as default};
//# sourceMappingURL=UrlProcessorPage-e9463fac.js.map
